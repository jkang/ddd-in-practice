#  #博客大赛#BA和Architect的完美结对
---
 
## 领域驱动设计: "但我敢肯定不是由开发者在屏幕前独自空想出来的" 


初识领域驱动设计
以为领域设计是...
深入领域驱动设计...



## 从一个案例谈起
 
> 乐乐是我邻居家的姑娘，毕业于XX师范学院。毕业后去一家创业公司做市场推广，但2年后公司倒闭。她之前在学校是美术系的，带过小朋友学绘画，准备重操旧业。她做了3个月之后，还挺红火，报名她画画班的人多了起来。
之前人少的时候，都是打电话给她报名，然后去上课的时候现场交钱。但现在报名的人多了，手工做不过来。
她想着我们能不能帮忙做个工具，帮她管理报名，并记录缴费。
>

在这个案例下，如果用领域驱动设计，我们会怎么开始呢？

业务分析的思路一般是：

1. 用户提出的诉求是什么
2. 如果聚焦成一个业务问题，那这个问题是什么？
3. 对这个问题，会大致怎么解决
4. 描述成需求

找出用例或用户故事中的名词：
>
* __乐乐__发布__报名表__
* __家长__填写__报名表__，替孩子报名乐乐__画画班__
* 家长缴费以后，__乐乐__登记__缴费记录__
>

![由用例驱动出概念模型](./1.jpg "概念模型")  
图 由用例驱动出概念模型


通过这个案例， 业务分析的过程：

* 理清用户诉求、需求的范围
* 有助于简化模型

##  如何确定限界上下文的边界
>
等乐乐做到第二年的时候，“小画笔”业务越开展越红火了。乐乐现在自己租了个场地，面向2-10岁小朋友做绘画培训，开了3门课程。她一个人已经应付不过来，找到XX师范学院的同学和老师，他们业余时间来她的培训班兼职；同时找了一个帮手欣欣来负责报名等。 

乐乐当前的主要工作是： 
* 根据现有老师的时间、场地，做好课程表安排，提前2个月把下期课程安排好 
* 管理和协调老师资 
* 保证课程质量和安全，保证营收，维持培训机构正常运转
欣欣会帮助乐乐： 
* 印成宣传彩页，在附近社区里给家长宣传，招募生源； 
* 接受家长报名，记录和追踪报名情况 
* 收取学费

这是2014年。
当前课程有三个： 
美术预科：适合2-3岁孩子，从看、摸、闻、听、尝培养艺术感； 
书法：适合3-7岁孩子，学习字体结构、笔画线条； 
儿童绘本：适合年龄5-10岁，用文字和图画表达；
每门课： 
          - 每期课程8次，每周2次，一个月（4周）上完； 
          - 分为平时班和周末班；平时班周二和周四晚上上课；周末班是周六或周日上课； 
          - 每班最多12个孩子； 
          - 每月月初开始新期课程，8次课结束后重新开始。 

__挑战__
请为乐乐设计一个工具，能让乐乐方便地排课、管理报名和课堂质量管理，维护“小画笔”的正常运营。
> 


###  如何找出限界上下文？

思路其实还是类似的，但比之前更细致了一点：

1. 用户访谈，找出各自最关心的问题
2. 用户访谈：了解当前的业务流程
3. 分析：找出核心的业务问题

![由用例驱动出概念模型](./1.jpg "概念模型")  
图 需求的边界也是限界上下文的边界

![由用例驱动出概念模型](./1.jpg "概念模型")  
图 上下文地图

结论：

* 限界上下文的边界，也是需求和模型的边界


### 如果发现了通用语言中的歧义，怎么办？

例子：
>

>

* 将新的通用语言和限界上下文加入到团队中来，这些变化可能会影响业务分析和信息架构


##  如何确定服务的边界

> 经过三年的运转，“乐乐小画笔”已经成为了当地一个响当当的品牌，过去的客户群已经形成了超过万人的社区。由于口碑，乐乐可以预见这样的需求会持续增长，而且家长会更看中高质量的美术教育，而不仅仅是画画技能。

乐乐希望在现有的业务上升级品牌，把“乐乐小画笔”真正打造成为高质量美育的综合课堂，而不仅限于线下画画课程。

她的二次创业想法得到了一些投资人的支持。她计划构建一个平台：从品牌信息发布、线上3D博物馆、线上课堂、线下课堂、虚拟及线下社区营销活动、孩子作品展和拍卖等。希望通过这个平台，提供一个线上线下相结合、真正能给孩子提供高价值的艺术教育资源，实践自己的教育理念和梦想。 

__挑战__
请结合“乐乐美术课堂”的业务问题，设计这个数字平台的架构。 

> 

结论：

* 业务服务的边界就是限界上下文的边界

* 通过组织架构、业务模式的分析构建出业务全景，找到业务领域及子领域
* 分析不同业务领域的流程、渠道触点、运作模式的异同，来找出业务服务；
* 不同业务服务中重叠的子领域/限界上下文，即潜在的基础服务
* 限界上下文即潜在的服务边界


## 小结

* 业务分析的过程，理清用户诉求、需求的范围，有助于简化模型
* 把握核心业务问题，有助于确定需求和模型的边界
* 业务全景分析可以找到粒度合适的服务






